(function(e){function t(t){for(var n,o,s=t[0],l=t[1],c=t[2],d=0,h=[];d<s.length;d++)o=s[d],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&h.push(a[o][0]),a[o]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);u&&u(t);while(h.length)h.shift()();return i.push.apply(i,c||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],n=!0,o=1;o<r.length;o++){var l=r[o];0!==a[l]&&(n=!1)}n&&(i.splice(t--,1),e=s(s.s=r[0]))}return e}var n={},a={app:0},i=[];function o(e){return s.p+"js/"+({about:"about"}[e]||e)+"."+{about:"6af76d8c"}[e]+".js"}function s(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.e=function(e){var t=[],r=a[e];if(0!==r)if(r)t.push(r[2]);else{var n=new Promise((function(t,n){r=a[e]=[t,n]}));t.push(r[2]=n);var i,l=document.createElement("script");l.charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.src=o(e);var c=new Error;i=function(t){l.onerror=l.onload=null,clearTimeout(d);var r=a[e];if(0!==r){if(r){var n=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+n+": "+i+")",c.name="ChunkLoadError",c.type=n,c.request=i,r[1](c)}a[e]=void 0}};var d=setTimeout((function(){i({type:"timeout",target:l})}),12e4);l.onerror=l.onload=i,document.head.appendChild(l)}return Promise.all(t)},s.m=e,s.c=n,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(r,n,function(t){return e[t]}.bind(null,n));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var u=c;i.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"21bb":function(e,t,r){"use strict";r("2dad")},"2dad":function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("router-view")],1)},i=[],o=(r("5c0b"),r("2877")),s={},l=Object(o["a"])(s,a,i,!1,null,null,null),c=l.exports,d=(r("d3b7"),r("3ca3"),r("ddb0"),r("8c4f")),u=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"relations app-container"},[r("div",{attrs:{id:"canvas"}}),r("div",{staticClass:"tree-icon",on:{click:e.toggleTree}},[r("i",{staticClass:"fa fa-tree"})])])},h=[],f=r("2909"),p=(r("159b"),r("7c3e")),g={nodes:[{id:"1",label:"刘备",cluster:"a",type:"project"},{id:"2",label:"关羽",cluster:"a",type:"testType"},{id:"3",label:"张飞",cluster:"a",type:"testItem"},{id:"4",label:"曹操",cluster:"a",type:"usercase"},{id:"5",label:"孙权",cluster:"a",type:"usercase"},{id:"6",label:"吕蒙",cluster:"a",type:"project"}],edges:[{source:"1",target:"2",label:"大哥"},{source:"2",target:"3",label:"大哥"},{source:"3",target:"4",label:"大哥"},{source:"3",target:"5",label:"大哥"}]},b={data:function(){return{isTree:!1,graph:null}},methods:{notTree:function(){var e=this,t=document.getElementById("canvas"),r=t.scrollWidth,n=t.scrollHeight||500;this.graph=new p["a"].Graph({container:"canvas",width:r,height:n,modes:{default:["drag-canvas","zoom-canvas","collapse-expand-combo","drag-combo",{type:"activate-relations",trigger:"click"},"drag-node","highlight-node","click-select"]},defaultNode:{size:26},layout:{type:"fruchterman",gravity:10,speed:5,tick:function(){e.graph.refreshPositions()}}}),this.graph.node((function(e){var t="1"===e.id?"rgba(255, 0, 0, 0.5)":"#40feff";return{label:e.id,style:{fill:t},stateStyles:{selected:{fill:"rgb(255, 255, 255)",lineWidth:4,shadowBlur:10,shadowColor:t,stroke:t}}}})),this.graph.data(g),this.graph.render(),"undefined"!==typeof window&&(window.onresize=function(){e.graph&&!e.graph.get("destroyed")&&t&&t.scrollWidth&&t.scrollHeight&&e.graph.changeSize(t.scrollWidth,t.scrollHeight)})},tree:function(){var e=this,t=this.toTreeData(),r=document.getElementById("canvas"),n=r.scrollWidth,a=r.scrollHeight||500;this.graph=new p["a"].TreeGraph({container:"canvas",width:n,height:a,linkCenter:!0,animate:!0,modes:{default:["highlight-node","drag-canvas","zoom-canvas","drag-node"]},defaultNode:{size:26,anchorPoints:[[0,1]]},defaultEdge:{type:"line-dash",style:{endArrow:{path:p["a"].Arrow.triangle(8,8,12),d:12,fill:"#888"},startArrow:{path:p["a"].Arrow.triangle(0,0,12),d:12,fill:"#888"}}},layout:{type:"dendrogram",direction:"LR",nodeSep:20,rankSep:100,radial:!0}}),this.graph.node((function(e){var t="1"===e.id?"rgba(255, 0, 0, 0.5)":"rgba(115, 154, 255, 0.1)";return{label:e.id,style:{fill:t},stateStyles:{selected:{fill:"rgb(255, 255, 255)",lineWidth:4,shadowBlur:10,shadowColor:t,stroke:t},active:{fill:"#ffbd0f",lineWidth:4,shadowBlur:10,stroke:"#ffbd0f"}}}})),this.graph.edge((function(t){console.log(e.graph.findById(t.source));var r=e.graph.findById(t.source).getModel();return console.log(r.rol?r.rol:""),{label:r.rel?r.rel:"",autoRotate:!0}})),this.graph.data(t),this.graph.render(),this.graph.fitCenter();var i=this.graph.findById("parent");this.graph.hideItem(i),"undefined"!==typeof window&&(window.onresize=function(){e.graph&&!e.graph.get("destroyed")&&r&&r.scrollWidth&&r.scrollHeight&&e.graph.changeSize(r.scrollWidth,r.scrollHeight)})},toggleTree:function(){this.graph.clear(),this.graph.destroy(),this.isTree=!this.isTree},toTreeData:function(){return{id:"parent",children:[{id:"1",label:"刘备",cluster:"a",type:"project",children:[{id:"2",label:"关羽",cluster:"a",type:"testType",rel:"23",children:[{id:"3",label:"张飞",cluster:"a",type:"testItem",children:[{id:"4",label:"曹操",cluster:"a",type:"usercase",children:[]},{id:"5",label:"孙权",cluster:"a",type:"usercase",children:[]},{id:"8",label:"司马懿",cluster:"a",type:"project"}]}]}]},{id:"6",label:"吕蒙",cluster:"a",type:"project",children:[{id:"7",label:"孙策",cluster:"a",type:"project"}]}]}},relationsBehavior:function(){p["a"].registerBehavior("highlight-node",{getDefaultCfg:function(){return{nodes:[],edges:[],timer:null}},getEvents:function(){return{"node:click":"onNodeClick","node:dblclick":"onNodeDblclick","canvas:click":"onResetStatus"}},onResetStatus:function(){var e=this.graph;this.nodes.forEach((function(t){t.destroyed||e.setItemState(t,"active",!1)})),this.edges.forEach((function(t){e.setItemState(t,"active",!1),e.setItemState(t,"running",!1)})),this.nodes=[],this.edges=[]},onNodeClick:function(e){var t=this;if(this.timer)return clearTimeout(this.timer),void(this.timer=null);this.timer=setTimeout((function(){t.highLightNodeAndEdge(e)}),150)},highLightNodeAndEdge:function(e){var t,r=this;console.log(1);var n=this.graph,a=e.item;if(a){var i=a.getModel();this.onResetStatus(),this.edges=a.getEdges(),this.edges.forEach((function(e){var t=e.getModel();console.log(t,"edgeModel"),t.source===i.id&&r.nodes.push(n.findById(t.target)),n.setItemState(e,"active",!0),n.setItemState(e,"running",!0)})),(t=this.nodes).push.apply(t,Object(f["a"])(a.getNeighbors())),this.nodes.push(a),this.nodes.forEach((function(e){n.setItemState(e,"active",!0)})),this.timer=null}},onNodeDblclick:function(e){var t=this,r=e.item,n=this.graph.findDataById(r.get("id"));if(n&&r){var a=n.children;if(a&&0!==a.length){var i=!n.collapsed;this.shouldBegin(e,i)&&(n.collapsed=i,r.getModel().collapsed=i,this.shouldUpdate(e,i)&&setTimeout((function(){t.graph.layout()}),60))}}}})},relationsEdge:function(){var e=[4,2,1,2];p["a"].registerEdge("line-dash",{setState:function(t,r,n){var a=n.get("keyShape");if("running"===t)if(r){var i=0;a.attr("stroke","#409eff"),a.animate((function(){i++,i>9&&(i=0);var t={lineDash:e,lineDashOffset:-i};return t}),{repeat:!0,duration:3e3})}else a.stopAnimate(),a.attr("lineDash",null),a.attr("stroke","rgb(224,224,224)")}},"line")}},mounted:function(){this.relationsEdge(),this.relationsBehavior(),this.notTree()},watch:{isTree:function(e){e?this.tree():this.notTree()}}},v=b,m=(r("21bb"),Object(o["a"])(v,u,h,!1,null,null,null)),y=m.exports;n["a"].use(d["a"]);var w=[{path:"/",name:"Home",component:y},{path:"/about",name:"About",component:function(){return r.e("about").then(r.bind(null,"f820"))}}],k=new d["a"]({mode:"hash",base:"",routes:w}),S=k,T=r("2f62");n["a"].use(T["a"]);var j=new T["a"].Store({state:{},mutations:{},actions:{},modules:{}});r("739f");n["a"].config.productionTip=!1,new n["a"]({router:S,store:j,render:function(e){return e(c)}}).$mount("#app")},"5c0b":function(e,t,r){"use strict";r("9c0c")},"739f":function(e,t,r){},"9c0c":function(e,t,r){}});
//# sourceMappingURL=app.b6fb650a.js.map